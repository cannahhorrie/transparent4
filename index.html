// In the index.html, inside the event listener
window.addEventListener('message', function(event) {
  console.log('Received message:', event.data);
  console.log('Unity Instance:', unityInstance);

  if (event.data.type === 'unityMessage') {
    // Ensure the message is from a trusted source if necessary
    switch (event.data.functionName) {
      case 'SetText':
        console.log('Setting text:', event.data.argument);
        if (unityInstance) {
          console.log('Sending message to Unity: SetText', event.data.argument);
          unityInstance.SendMessage('TextObject', 'SetText', event.data.argument);
        }
        break;
      case 'SetCameraXPosition':
        console.log('Setting camera X position:', event.data.argument);
        if (unityInstance) {
          console.log('Sending message to Unity: SetCameraXPosition', event.data.argument);
          unityInstance.SendMessage('Main Camera', 'SetCameraXPosition', event.data.argument);
        }
        break;
      case 'SetCameraRX':
        console.log('Setting camera X rotation:', event.data.argument);
        if (unityInstance) {
          console.log('Sending message to Unity: SetCameraRX', event.data.argument);
          unityInstance.SendMessage('Main Camera', 'SetCameraRX', event.data.argument);
        }
        break;
      default:
        console.warn('Unknown function name:', event.data.functionName);
    }
  }
});
